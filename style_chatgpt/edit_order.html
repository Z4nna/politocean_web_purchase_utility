<!DOCTYPE html>
<html>
<head>
    <title>Dettagli Ordine</title>
    <link rel="stylesheet" href="/static/css/global.css" />
    <link rel="stylesheet" href="/static/css/edit_order.css" />
    <script src="/static/js/edit_order.js"></script>
</head>
<body>
    <h1>Dettagli Ordine #{{ order.id }}</h1>

    <form action="/orders/{{ order.id }}/edit/submit" method="post">
        <label for="description">Descrizione:</label>
        <input type="text" id="description" name="description" value="{{ order.description }}"required><br><br>

        <p><strong>Data:</strong> {{ order.get_date() }}</p>

        <label for="area_division">Divisione:</label>
        <input type="text" id="area_division" name="area_division" value="{{ order.area_division }}"><br><br>

        <label for="area_sub_area">Sub-area:</label>
        <input type="text" id="area_sub_area" name="area_sub_area" value="{{ order.area_sub_area }}"><br><br>

        <p><strong>Stato:</strong>
            {% if order.confirmed %}
                Confermato
            {% else if order.ready %}
                Pronto
            {% else %}
                In preparazione
            {% endif %}
        </p>

        <h3>Articoli</h3>
        <div id="items-container"></div>

        <script>
            {% for item in items %}
            addItemEntry(
                "{{ item.proposal}}",
                "{{ item.project}}",
                "{{ item.manifacturer}}",
                "{{ item.manifacturer_pn}}",
                {{ item.quantity }}
            );
            {% endfor %}
        </script>

        <button type="button" class="add-button" onclick="addItemEntry()">+ Aggiungi Articolo</button><br><br>

        <button type="submit">Aggiorna ordine</button>
    </form>

    <h2>Actions</h2>
    <hr>
    <a href="/home" class="button">Torna alla Home</a>
    <form action="/orders/{{ order.id }}/edit/generate-bom" method="post"><button type="submit" class="button">Generate BOM</button></form>
    <form action="/orders/{{ order.id }}/edit/download-bom" method="post"><button type="submit" class="button">Download BOM</button></form>

</body>
</html>